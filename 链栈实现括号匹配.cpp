#include<iostream>

#define ok 1
#define error 0

typedef int status;
typedef char selemtype;
using namespace std;

//定义 
typedef struct node
{
	selemtype data;
	struct node *next;
}node,*linklist;

//初始化 
status sch(linklist &L)
{
	L=NULL;
	return ok;
}

//入栈
status rz(linklist &L,selemtype &e)
{
	linklist p;
	p=new node;
	p->data=e;
	p->next=L;
	L=p;
	return ok;
 } 
 
//出栈
char cz(linklist &L,selemtype &e)
{
	if(L==NULL)
	  return error;
	linklist p;
	e=L->data;
	p=L;
	L=L->next;
	delete p;
	return e;
 } 
 
//取栈顶元素
selemtype qzd(linklist &L)
{
	if(L!=NULL)
	  return L->data;
} 
 
//括号匹配 
status khpp(void)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
{
	linklist L;
	selemtype choose,e;
    cout<<"请输入需要匹配的括号符号："<<endl;
	status csh(linklist &L);
	cin>>choose;
	while(choose!='#')
	{
		switch(choose)
		{
			case '[':
				rz(L,choose);
				cout<<choose<<"为左括号府，存入栈顶。"<<endl;
				break;
			case '(':
				rz(L,choose);
				cout<<choose<<"为左括号府，存入栈顶。"<<endl;
				break;
			case ']':	
			    if(qzd(L)=='[')
			      cout<<cz(L,e)<<"和"<<choose<<"匹配成功！"<<endl;
			    else
			      cout<<cz(L,e)<<"和"<<choose<<"匹配失败！"<<endl;
			      break;
			case ')':
				if(qzd(L)=='(') 
			      cout<<cz(L,e)<<"和"<<choose<<"匹配成功！"<<endl;
			    else
			      cout<<cz(L,e)<<"和"<<choose<<"匹配失败！"<<endl;
			      break;
		}
		cin>>choose;
	}
}

int main()
{
	khpp();
	return 0;
}
